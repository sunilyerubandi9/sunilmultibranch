pipeline {
    agent any
    stages {
        

        stage('build') {
            steps {
                echo 'build asdfadsdfsa'
                snDevOpsStep()
                sleep 5
            }
        }

        stage('test') {
            steps {
                echo 'test .'
                snDevOpsStep()
                sleep 5
                //snDevOpsChange()
            }
        }

        stage('Deploy for development') {
            when {
                branch 'development'
            }
            steps {
                echo 'dev branch deployment - ${branch}'
                snDevOpsStep()
                
                sleep 15
            }
        }

        stage('Deploy for production') {
            when {
                branch 'prod'
            }
            steps {
                echo 'prod branch deployment - ${branch}'
                snDevOpsStep()
                //snDevOpsArtifact(artifactsPayload:"""{"artifacts": [{"name": "prod_artifact.jar","version": "1.1","semanticVersion": "1.1.0","repositoryName": "multibranch"}],"stageName": "Deploy for production"}""")
                sleep 15
            }
        }


    }
}
